<!Doctype html>
<html>
<head>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script>
	<script>
		$(document).ready(function() {
			//Function to clear all the objects when Clear all is clicked
			$("#clear").click(function() {
				$(".object").each(function() {
					$(this).remove();
				});
			});
			max = 0;
			$(document).on("mousedown", ".object", function(event){
				
					//alert($(this).css("z-index"));
					if($(this).css("z-index") != max){
						$(this).css("z-index", ++max);
					}
					$("#zIndex").text( $(this).css("z-index"));
					$(".selectedObject").removeClass("selectedObject");
					$(this).addClass("selectedObject");
					event.stopPropagation();
				});
			
			//When the document is double clicked, spawn an object
			$("#canvas").dblclick(function(e) {
				//Give it the starting position of the cursor
				$("#canvas").append('<div class="object" style="top:' + e.pageY + 'px; left:' + e.pageX + 'px;"/>');
				//Make all objects draggable to enable the most recently added one
				$(".object").draggable({
					containment: "parent",
				});
				
			});
		});
	</script>
	<style>
		body,html{
  			height:100%;
		}
		#canvas{
			height:100%;
		}
		.object {
			width: 300px;
			height: 200px;
			background: #666;
			position: absolute;
			border: 5px solid blue;	

		}
		
		.object:hover {
			cursor: move;
		}
		.selectedObject{
			border: 5px solid red;	
			
		}
		span {
			-webkit-touch-callout: none;
			-webkit-user-select: none;
			-khtml-user-select: none;
			-moz-user-select: none;
			-ms-user-select: none;
			user-select: none;
		}}
	</style>
</head>
<body>
	<span id="clear">Clear all</span>
	<span id="zIndex"></span>
	<div id="canvas"></div>

</body>
</html>