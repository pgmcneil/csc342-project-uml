<!Doctype html>
<html>
<head>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script>
	<script>
		$(document).ready(function() {
			//Function to clear all the objects when Clear all is clicked
			$("#clear").click(function() {
				$(".object").each(function() {
					$(this).remove();
				});
			});
			//When the document is double clicked, spawn an object
			$("body").on("dblclick", function(e) {
				var object = '<div class="object" style="top:' + e.pageY + 'px; left:' + e.pageX + 'px;"> \
					<span class="close">X</span>\
					</div>';
				//Give it the starting position of the cursor
				$("body").append(object);
				//Make all objects draggable to enable the most recently added one
				$(".object").draggable({
					containment: "parent"
				});
				//All internal element listeners must be inside here, only way to stop the propagation and enable listeners for children
				$("div.object").on("dblclick", function(e) {
					e.stopPropagation();
				});
				$("div.object span.close").on("click", function(e) {
					$(this).parent().remove();
				});
			});
		});
	</script>
	<style>
		html, body {
			height: 100%;
			width: 100%;
		}
		.object {
			width: 300px;
			height: 200px;
			background: #888;
			position: absolute;
		}
		.object:hover {
			cursor: move;
		}
		span {
			-webkit-touch-callout: none;
			-webkit-user-select: none;
			-khtml-user-select: none;
			-moz-user-select: none;
			-ms-user-select: none;
			user-select: none;
		}
		div#canvas {
			width: 100%;
			height: 100%;
			background-color: #eee;
		}
		span.close {
			position: relative;
			float: right;
			color: #c00;
		}
		span.close:hover {
			cursor: pointer;
		}
	</style>
</head>
<body>
	<span id="clear">Clear all</span>
</body>
</html>